(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1526,4248,7424],{22452:function(te,R,i){"use strict";i.r(R);var I=i(34792),j=i(48086),L=i(3182),oe=i(32059),u=i(11849),K=i(86582),W=i(2824),G=i(93224),ae=i(71194),H=i(50146),X=i(94043),S=i.n(X),V=i(93119),J=i.n(V),g=i(96486),s=i.n(g),o=i(67294),a=i(94184),r=i.n(a),n=i(92132),D=i(15323),P=i(85590),h=i(11882),v=i(36815),l=i(85893),ue=H.Z.confirm,re=(0,V.WidthProvider)(J()),Y=function(t,_){ue({title:(t==null?void 0:t.title)||"\u63D0\u793A",content:(t==null?void 0:t.content)||"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u6A21\u5757\u5417\uFF1F",onOk:function(){_()}})},se=function Q(t){var _=t.active,m=t.layout,le=t.onCloseContextMenu,N=t.onOpenContextMenu,k=t.transformScale,q=t.onClickItem,M=t.onLayoutChange,$=(0,G.Z)(t,["active","layout","onCloseContextMenu","onOpenContextMenu","transformScale","onClickItem","onLayoutChange"]),E=(0,o.useState)(!1),Z=(0,W.Z)(E,2),B=Z[0],p=Z[1];(0,o.useEffect)(function(){p(!0)},[]);var ee=(0,l.jsxs)("div",{className:"ruler-line",children:[(0,l.jsx)("div",{className:"ruler-line-x"}),(0,l.jsx)("div",{className:"ruler-line-y"})]}),ne=function(d,O){var C=m.findIndex(function(x){return x.i===O});if(C!==-1){var f=m[C];return[].concat((0,K.Z)(m.slice(0,C)),[(0,u.Z)((0,u.Z)({},f),{},{children:f==null?void 0:f.children.map(function(x,T){return(0,u.Z)((0,u.Z)({},x),d[T])})})],(0,K.Z)(m.slice(C+1)))}return[]},z=(0,o.useMemo)(function(){return m!=null&&m.length?s().map(m,function(e){var d=null;e.children||(e.settings&&(e.settings.componentIndex=e.i),e.origin==="AntdCharts"?e.category==="Clumn"?d=(0,l.jsx)(h.Clumn,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="Radar"?d=(0,l.jsx)(h.Radar,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="Rose"?d=(0,l.jsx)(h.Rose,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="Line"?d=(0,l.jsx)(h.Line,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="Pie"?d=(0,l.jsx)(h.Pie,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="Treemap"?d=(0,l.jsx)(h.Treemap,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="RadialBar"&&(d=(0,l.jsx)(h.RadialBar,(0,u.Z)({},(0,n.changeValue)(e.settings)))):e.origin==="Customize"?e.category==="background"?d=(0,l.jsx)(v.Background,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="iconText"?d=(0,l.jsx)(v.IconText,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="img"?d=(0,l.jsx)(v.Img,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="text"?d=(0,l.jsx)(v.Text,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="lines"?d=(0,l.jsx)(v.Lines,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="mapClus"?d=(0,l.jsx)(v.MapClus,{}):e.category==="list"?d=(0,l.jsx)(v.List,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="table"?d=(0,l.jsx)(v.Table,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="region"?d=(0,l.jsx)(v.Region,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="progress"?d=(0,l.jsx)(v.Progress,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="search"?d=(0,l.jsx)(v.Search,{}):e.category==="listBox"?d=(0,l.jsx)(v.ListBox,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="rankList"?d=(0,l.jsx)(v.RankList,(0,u.Z)({},(0,n.changeValue)(e.settings))):e.category==="ball"&&(d=(0,l.jsx)(v.Ball,(0,u.Z)({},(0,n.changeValue)(e.settings)))):e.origin==="VirtualTable"&&(d=(0,l.jsx)(v.VirtualTable,(0,u.Z)({},(0,n.changeValue)(e.settings)))));var O=r()("grid-item",(0,oe.Z)({},"grid-item-active",(0,D.Xy)(_,e.i)));return(0,l.jsxs)("div",{className:O,style:{zIndex:e.zIndex,pointerEvents:"auto"},onClick:function(f){var x;f.stopPropagation();var T=[e.i];t!=null&&t.itemKey&&T.unshift(t.itemKey),(x=t.onActiveChange)===null||x===void 0||x.call(t,T)},onMouseUpCapture:function(f){f.button===2&&(_==null?void 0:_.length)>=1&&N(f)},children:[(0,D.Xy)(_,e.i)?ee:null,e.children?(0,l.jsx)(Q,(0,u.Z)((0,u.Z)((0,u.Z)({},t),e),{},{resizeHandles:["sw","se","nw","ne","w","e","n","s"],isBounded:!1,layout:e.children,itemKey:e.i,onNestedLayoutChange:ne})):d]},e.i)}):null},[m,_]),F=(0,u.Z)((0,u.Z)({layout:m,transformScale:k},$),{},{measureBeforeMount:B,rowHeight:1,margin:[0,0],allowOverlap:!0,useCSSTransforms:!1,compactType:"vertical",preventCollision:!0,isBounded:!1,style:{width:(t==null?void 0:t.width)||"100%",height:(t==null?void 0:t.height)||"100%",pointerEvents:"none"},onDragStart:function(d,O,C,f,x){x.preventDefault(),x.stopPropagation()}});return(0,l.jsx)(P.J.Provider,{value:{},children:(0,l.jsx)(re,(0,u.Z)((0,u.Z)({},F),{},{onLayoutChange:function(d){if(t.onNestedLayoutChange){var O=t.onNestedLayoutChange(d,t==null?void 0:t.itemKey);M==null||M(O);return}M==null||M(m.map(function(C,f){return(0,u.Z)((0,u.Z)({},C),d[f])}))},children:z}))})},ie=function(t){var _=t.onChange,m=t.scale,le=m===void 0?1:m,N=t.cols,k=N===void 0?24:N,q=t.zIndex,M=q===void 0?20:q,$=t.data,E=$===void 0?{}:$,Z=t.onClickItem,B=t.active,p=t.contextMenu$,ee=t.onAdd$,ne=t.onDelete$,z=t.onCopy$,F=t.onCombine$,e=(0,o.useRef)(null),d=(0,o.useState)(E.layouts||[]),O=(0,W.Z)(d,2),C=O[0],f=O[1],x=function(c){c.preventDefault()},T=function(c){var A={x:C.length*3%12,y:0,w:300,h:150,i:new Date().getTime().toString(),zIndex:M+C.length+1},w=s().cloneDeep(C);w.push((0,u.Z)((0,u.Z)({},A),c))&&(_==null||_({layouts:w})),_==null||_({layouts:w})};ee.useSubscription(T);var U=function(){p.emit({data:null,x:0,y:0})};ne.useSubscription(function(y){!y.length||Y(null,function(){var c=(0,D.bN)(C,B);f(c),_==null||_(c),U()})});var de=function(c){!c.length||Y({content:"\u60A8\u786E\u5B9A\u8981\u590D\u5236\u8BE5\u6A21\u5757\u5417\uFF1F"},function(){var A=(0,D.R8)(C,B);f(A),_==null||_(A),U()})};z.useSubscription(de),F.useSubscription(function(y){!y.length||Y({content:"\u60A8\u786E\u5B9A\u8981\u5408\u5E76\u8BE5\u56FE\u5C42\u5417\uFF1F"},(0,L.Z)(S().mark(function c(){var A;return S().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,(0,D.$G)(C,B,{w:400,h:400});case 3:A=b.sent,f(A),_==null||_(A),U(),b.next=12;break;case 9:b.prev=9,b.t0=b.catch(0),j.default.error("\u5B58\u5728\u5DF2\u5408\u5E76\u9879\uFF0C\u65E0\u6CD5\u518D\u6B21\u5408\u5E76");case 12:case"end":return b.stop()}},c,null,[[0,9]])})))});var _e=function(c){p.emit({data:B,x:c.pageX,y:c.pageY})},ce=function(c){Z==null||Z(c)};(0,o.useEffect)(function(){var y;return e==null||(y=e.current)===null||y===void 0||y.addEventListener("contextmenu",x),function(){var c;e==null||(c=e.current)===null||c===void 0||c.removeEventListener("contextmenu",x)}},[]),(0,o.useEffect)(function(){f(function(){return E.layouts||[]})},[E.layouts]);var ve={className:"layout grid-layout ".concat((E==null?void 0:E.className)||""),rowHeight:1,cols:E.w||k,width:E.w,height:E.h,active:B,layout:C,allowOverlap:!0,useCSSTransforms:!1,transformScale:le,compactType:"vertical",preventCollision:!1,handle:function(c,A){return(0,l.jsx)("span",{className:"custom-handle custom-handle-".concat(c),ref:A,style:{borderColor:"#FFF"}})},resizeHandles:["sw","se","nw","ne","w","e","n","s"],onCloseContextMenu:U,onOpenContextMenu:_e,onClickItem:Z,onLayoutChange:function(c){f(c),_==null||_({layouts:c})},onActiveChange:ce};return(0,l.jsx)("div",{ref:e,onClickCapture:U,style:{backgroundColor:E.bg_color,backgroundRepeat:"no-repeat",backgroundPosition:"0% 0%",backgroundImage:E.bg_img?"url(".concat(E.bg_img,")"):void 0,backgroundSize:E.bg_size||"contain",filter:"blur(0px)",width:E.w,height:E.h},children:(0,l.jsx)(se,(0,u.Z)({},ve))})};R.default=ie},15323:function(te,R,i){"use strict";i.d(R,{Xy:function(){return W},bN:function(){return ae},R8:function(){return H},$G:function(){return X},$b:function(){return S},dA:function(){return V},ln:function(){return J}});var I=i(11849),j=i(96486),L=i.n(j),oe=function(){};function u(g,s){return Math.random()*(s-g)+g}var K=function(s,o){if(!o||!o.length)return!1;for(var a=!1,r=0;r<s.length;r++)for(var n=0;n<s[r].length;n++)if(s[r][n]===o){a=!0;break}return a},W=function(s,o){if(!o||!o.length)return!1;for(var a=!1,r=0;r<s.length;r++){var n=s[r];if(n!=null&&n.length&&n[n.length-1]===o){a=!0;break}}return a},G=function(s,o){for(var a=L().cloneDeep(s),r,n=0;n<o.length;n++){for(var D=!1,P=0;P<a.length;P++)if(o[n][0]===a[P].i){D=!0;continue}if(!D){r=o[n];break}}return r},ae=function g(s,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=L().cloneDeep(s);return r.filter(function(n){for(var D=!1,P=!1,h=0;h<o.length;h++){var v;console.log(o[h],a,(v=o[h])===null||v===void 0?void 0:v[a]),o[h].length===a+1&&n.i===o[h][a]&&(D=!0),o[h].length>a+1&&(P=!0)}if(!n.children||n.children&&!P)return!D;if(P){var l;if(n.children=g(n.children,o,a+1),console.log(n,o),!((l=n.children)!==null&&l!==void 0&&l.length))return!1}return n})},H=function g(s,o){for(var a=L().cloneDeep(s),r=0;r<a.length;r++){if(K(o,a[r].i)){a.push((0,I.Z)((0,I.Z)({},a[r]),{},{i:"".concat(new Date().getTime()+u(0,9999999))}));continue}a[r].children&&(a[r].children=g(a[r].children,o))}return a},X=function(s,o,a){var r=L().cloneDeep(s);return new Promise(function(n,D){G(s,o)&&D("\u5B58\u5728\u5DF2\u5408\u5E76\u9879\uFF0C\u65E0\u6CD5\u518D\u6B21\u5408\u5E76");for(var P=[],h=[],v=[],l=0;l<r.length;l++)K(o,r[l].i)?v.push((0,I.Z)({},r[l])):h.push(r[l]);P.push({x:0,y:0,w:a.w?Number(a.w):300,h:a.h?Number(a.h):150,i:new Date().getTime().toString(),zIndex:20+h.length+1,children:v}),n(P.concat(h))})},S=function g(s,o){if(!(o!=null&&o.length))return null;for(var a=L().cloneDeep(o),r=0;r<s.length;r++)if(s[r].i===a[0])return a.splice(0,1),a.length&&s[r].children?g(s[r].children,a):s[r]},V=function g(s,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(!(o!=null&&o.length))return null;for(var r=L().cloneDeep(o),n=0;n<s.length;n++)if(s[n].i===r[0])return a.push(n),s[n].children&&r.length>=2?(r.splice(0,1),a.push("children"),g(s[n].children,r,a)):a},J=function g(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!Array.isArray(s)||!(s!=null&&s.length))return o;for(var a=0;a<s.length;a++){var r=s[a];r.children?g(r.children,o):o.push(r)}return o}},73577:function(te,R,i){"use strict";i.d(R,{Z:function(){return j}});var I=i(67294);function j(){var L=I.useRef(!0);return I.useEffect(function(){return function(){L.current=!1}},[]),function(){return!L.current}}}}]);
